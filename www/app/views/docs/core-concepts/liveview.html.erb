<div class="max-w-3xl mx-auto">
    <div class="mb-16">
        <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl mb-6">
            <span class="bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">Live View</span>
        </h1>
        <p class="text-xl text-gray-300 leading-8">
            Build reactive, real-time interfaces without writing JavaScript. Live View renders components on the server and efficiently updates the DOM over WebSockets.
        </p>
    </div>

    <div class="mb-12 p-1 rounded-2xl bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500">
        <div class="bg-gray-950 rounded-xl p-6 flex flex-col sm:flex-row items-center justify-between gap-6">
            <div>
                <h3 class="text-lg font-semibold text-white mb-2">See it in action</h3>
                <p class="text-gray-400 text-sm">Try the interactive counter demo on our landing page.</p>
            </div>
            <a href="/#live-view-demo" class="btn-glow inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white text-gray-900 font-bold hover:bg-gray-100 transition-all shadow-lg shadow-white/10">
                <span class="relative flex h-3 w-3 mr-1">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                </span>
                Try Live Demo
            </a>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">How It Works</h2>
    <p class="text-gray-400 mb-6">
        Live View is a server-rendered component system that maintains state on the server. When users interact with the page, events are sent over WebSockets, the server updates the component state, re-renders the template, and sends back only the differences (diffs) to update the DOM.
    </p>
    <div class="mb-12 p-6 rounded-xl bg-white/5 border border-white/10">
        <div class="flex flex-col md:flex-row items-center justify-between gap-4 text-sm">
            <div class="text-center p-4">
                <div class="w-12 h-12 mx-auto mb-2 rounded-lg bg-indigo-500/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122" /></svg>
                </div>
                <div class="text-white font-medium">User Event</div>
                <div class="text-gray-500">Click, Submit, Change</div>
            </div>
            <svg class="w-8 h-8 text-gray-600 rotate-90 md:rotate-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>
            <div class="text-center p-4">
                <div class="w-12 h-12 mx-auto mb-2 rounded-lg bg-purple-500/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" /></svg>
                </div>
                <div class="text-white font-medium">Server</div>
                <div class="text-gray-500">Update State & Render</div>
            </div>
            <svg class="w-8 h-8 text-gray-600 rotate-90 md:rotate-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>
            <div class="text-center p-4">
                <div class="w-12 h-12 mx-auto mb-2 rounded-lg bg-pink-500/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-pink-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" /></svg>
                </div>
                <div class="text-white font-medium">DOM Update</div>
                <div class="text-gray-500">Apply Diff Patch</div>
            </div>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">Creating a Live View Component</h2>

    <h3 class="text-lg font-semibold text-white mb-4">Step 1: Create the Template</h3>
    <p class="text-gray-400 mb-4">Create a <code>.sliv</code> file in <code>app/views/live/</code>. Use <code>@variable</code> syntax for reactive state.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-8">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">app/views/live/counter.sliv</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-html text-sm">&lt;div class="counter-component"&gt;
    &lt;h2&gt;Count: @count&lt;/h2&gt;

    &lt;button soli-click="decrement"&gt;-&lt;/button&gt;
    &lt;button soli-click="increment"&gt;+&lt;/button&gt;
&lt;/div&gt;</code></pre>
        </div>
    </div>

    <h3 class="text-lg font-semibold text-white mb-4">Step 2: Register the Route</h3>
    <p class="text-gray-400 mb-4">Register your Live View component in <code>config/routes.sl</code> using the <code>router_live</code> function.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-8">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">config/routes.sl</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-soli text-sm">// Register LiveView components
router_live("counter", "live#counter");
router_live("metrics", "live#metrics");</code></pre>
        </div>
    </div>

    <h3 class="text-lg font-semibold text-white mb-4">Step 3: Create the Controller</h3>
    <p class="text-gray-400 mb-4">Create a controller that handles events. The handler receives an event hash with <code>event</code> (name), <code>params</code>, and <code>state</code>. Return the new state as a hash.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-12">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">app/controllers/live_controller.sl</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-soli text-sm">// Counter component handler
fn counter(event_data: Any) -> Any {
    let event = event_data["event"];   // Event name (e.g., "increment")
    let params = event_data["params"]; // Event parameters
    let state = event_data["state"];   // Current component state
    let count = state["count"];

    if (count == null) {
        count = 0;
    }

    if (event == "increment") {
        return { "count": count + 1 };
    }

    if (event == "decrement") {
        return { "count": count - 1 };
    }

    // Return unchanged state for unknown events
    return state;
}</code></pre>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">Available Directives</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-12">
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-click</code>
            <p class="text-sm text-gray-400 mt-2">Triggers on element click. <code>&lt;button soli-click="save"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-submit</code>
            <p class="text-sm text-gray-400 mt-2">Triggers on form submission. <code>&lt;form soli-submit="create"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-change</code>
            <p class="text-sm text-gray-400 mt-2">Triggers on input value change. <code>&lt;select soli-change="filter"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-keydown</code>
            <p class="text-sm text-gray-400 mt-2">Triggers on key press. <code>&lt;input soli-keydown="search"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-keyup</code>
            <p class="text-sm text-gray-400 mt-2">Triggers on key release. <code>&lt;input soli-keyup="validate"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-focus</code>
            <p class="text-sm text-gray-400 mt-2">Triggers when element gains focus. <code>&lt;input soli-focus="highlight"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-blur</code>
            <p class="text-sm text-gray-400 mt-2">Triggers when element loses focus. <code>&lt;input soli-blur="validate"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-value-*</code>
            <p class="text-sm text-gray-400 mt-2">Binds input value to state. <code>&lt;input soli-value-name&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-target</code>
            <p class="text-sm text-gray-400 mt-2">Specifies target component for updates. <code>&lt;div soli-target="results"&gt;</code></p>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <code class="text-purple-300 font-bold">soli-debounce</code>
            <p class="text-sm text-gray-400 mt-2">Debounces event by ms. <code>&lt;input soli-keyup="search" soli-debounce="300"&gt;</code></p>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">State Management</h2>
    <p class="text-gray-400 mb-6">State is stored on the server and accessed in templates using <code>@variable</code> syntax. The server maintains state between events.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-12">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">Template Variables</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-html text-sm">&lt;!-- Simple variable --&gt;
&lt;span&gt;Hello, @username&lt;/span&gt;

&lt;!-- Conditional rendering --&gt;
&lt;% if @logged_in %&gt;
    &lt;a href="/logout"&gt;Sign Out&lt;/a&gt;
&lt;% else %&gt;
    &lt;a href="/login"&gt;Sign In&lt;/a&gt;
&lt;% end %&gt;

&lt;!-- Iteration --&gt;
&lt;% for item in @items %&gt;
    &lt;li&gt;&lt;%= item["name"] %&gt;&lt;/li&gt;
&lt;% end %&gt;</code></pre>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">Client Setup</h2>
    <p class="text-gray-400 mb-6">Include the Live View client library and mount your component.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-12">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">HTML</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-html text-sm">&lt;!-- Include the Live View client (~2KB gzipped) --&gt;
&lt;script src="/js/live.js"&gt;&lt;/script&gt;

&lt;!-- Mount a Live View component --&gt;
&lt;div id="counter" data-live-view="counter"&gt;&lt;/div&gt;

&lt;script&gt;
    // Initialize Live View
    SoliLive.connect();
&lt;/script&gt;</code></pre>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">Route Configuration</h2>
    <p class="text-gray-400 mb-6">Register the Live View WebSocket endpoint in your routes.</p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-12">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">config/routes.sl</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-soli text-sm">// Live View WebSocket endpoint
router_live("/live/counter", "live#counter");</code></pre>
        </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">High-Rate Updates</h2>
    <p class="text-gray-400 mb-6">
        Live View supports server-pushed updates for real-time dashboards, monitoring, and live data feeds.
        Use the <code>tick</code> event type to push updates at high frequencies (up to 60 updates/second).
    </p>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-8">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">app/controllers/live_controller.sl</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-soli text-sm">fn metrics_dashboard(event: Any) -> Any {
    let type = event["type"];

    if (type == "connect") {
        // Set tick interval in milliseconds (50ms = 20 updates/sec)
        return {
            "state": { "cpu": 0, "memory": 0, "requests": 0 },
            "tick_interval": 50
        };
    }

    if (type == "tick") {
        // Server pushes fresh data on each tick
        return {
            "state": {
                "time": datetime_now(),
                "cpu": system_cpu_usage(),
                "memory": system_memory_mb(),
                "requests": request_counter()
            }
        };
    }

    return {};
}</code></pre>
        </div>
    </div>

    <div class="rounded-xl bg-gray-950 ring-1 ring-white/10 overflow-hidden shadow-xl mb-12">
        <div class="px-4 py-2 border-b border-white/5 bg-white/5 flex items-center justify-between">
            <span class="text-xs text-gray-400 font-mono">app/views/live/metrics.sliv</span>
        </div>
        <div class="p-4 overflow-x-auto">
<pre><code class="language-html text-sm">&lt;div class="dashboard"&gt;
    &lt;div class="metric"&gt;
        &lt;span class="label"&gt;Server Time&lt;/span&gt;
        &lt;span class="value"&gt;@time&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class="metric"&gt;
        &lt;span class="label"&gt;CPU&lt;/span&gt;
        &lt;span class="value"&gt;@cpu%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class="metric"&gt;
        &lt;span class="label"&gt;Memory&lt;/span&gt;
        &lt;span class="value"&gt;@memory MB&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class="metric"&gt;
        &lt;span class="label"&gt;Requests/sec&lt;/span&gt;
        &lt;span class="value"&gt;@requests&lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>
    </div>

    <div class="my-8 p-6 rounded-xl bg-yellow-500/10 border border-yellow-500/20 mb-12">
        <h4 class="text-lg font-semibold text-yellow-400 mb-2 flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
            </svg>
            Tick Intervals
        </h4>
        <ul class="text-yellow-200/80 text-sm space-y-1">
            <li><strong>1000ms</strong> - Good for dashboards, status pages</li>
            <li><strong>100ms</strong> - Good for live charts, activity feeds</li>
            <li><strong>50ms (20/s)</strong> - Good for real-time monitoring</li>
            <li><strong>16ms (60/s)</strong> - Maximum rate, use sparingly for animations</li>
        </ul>
    </div>

    <h2 class="text-2xl font-bold text-white mb-6">Performance</h2>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-12">
        <div class="p-6 rounded-xl bg-white/5 border border-white/10 text-center">
            <div class="text-3xl font-bold text-white mb-1">~2KB</div>
            <div class="text-sm text-indigo-400 font-medium">Client Size (gzipped)</div>
        </div>
        <div class="p-6 rounded-xl bg-white/5 border border-white/10 text-center">
            <div class="text-3xl font-bold text-white mb-1">&lt;50ms</div>
            <div class="text-sm text-purple-400 font-medium">Round-trip Latency</div>
        </div>
        <div class="p-6 rounded-xl bg-white/5 border border-white/10 text-center">
            <div class="text-3xl font-bold text-white mb-1">Diff</div>
            <div class="text-sm text-pink-400 font-medium">Minimal Updates</div>
        </div>
    </div>

    <div class="my-8 p-6 rounded-xl bg-indigo-500/10 border border-indigo-500/20 mb-12">
        <h4 class="text-lg font-semibold text-indigo-400 mb-2 flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
            </svg>
            Why Live View?
        </h4>
        <ul class="text-indigo-200/80 text-sm space-y-2">
            <li><strong>No JavaScript required</strong> - Build interactive UIs with just server-side code</li>
            <li><strong>SEO friendly</strong> - Initial HTML is server-rendered</li>
            <li><strong>Reduced complexity</strong> - No client-side state management to maintain</li>
            <li><strong>Real-time by default</strong> - WebSocket connection enables instant updates</li>
        </ul>
    </div>
</div>
