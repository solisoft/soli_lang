{
  "framework": "Soli MVC",
  "version": "1.0.0",
  "description": "A web programming language with built-in MVC framework",
  "language": "Soli",
  "fileExtension": ".sl",

  "projectStructure": {
    "app": {
      "controllers": "Request handlers, extend Controller base class",
      "middleware": "HTTP middleware functions (global and scoped)",
      "models": "Data models with SoliDB/SolidB integration",
      "views": "ERB-style templates and layouts",
      "helpers": "View helper functions",
      "modules": "Reusable modules with import/export"
    },
    "config": {
      "routes.sl": "Route definitions (get, post, put, delete, resources)"
    },
    "public": "Static assets (CSS, JS, images)"
  },

  "languageFeatures": {
    "asyncAwait": {
      "description": "Asynchronous programming with async/await syntax",
      "syntax": {
        "asyncFunction": "async fn function_name(req: Any) -> Any",
        "await": "await promise_expression",
        "promiseReturn": "return promise(value)",
        "promiseAll": "promise_all(array_of_promises)"
      },
      "examples": [
        "async fn fetch_data(req: Any) -> Any { let data = await http_get(url); return data; }",
        "async fn fetch_all(req: Any) -> Any { return await promise_all([fetch_a(), fetch_b()]); }"
      ]
    },
    "exceptionHandling": {
      "description": "Exception handling with try/catch/throw",
      "syntax": {
        "tryCatch": "try { /* code */ } catch (error) { /* handle */ }",
        "tryCatchFinally": "try { /* code */ } catch (error) { /* handle */ } finally { /* cleanup */ }",
        "throw": "throw \"error message\"",
        "throwError": "throw Error.new(\"message\", { code: 500 })"
      },
      "errorTypes": ["Error", "ValueError", "TypeError", "KeyError", "IndexError", "RuntimeError"],
      "examples": [
        "try { let result = risky_operation(); } catch (e) { print(\"Error:\", e); }",
        "try { validate(data); } catch (e: ValueError) { return {\"error\": e.message}; } finally { cleanup(); }"
      ]
    },
    "moduleSystem": {
      "description": "Module system with import/export for code organization",
      "syntax": {
        "import": "import \"module_name\";",
        "importWithAlias": "import \"module_name\" as alias;",
        "importSpecific": "import { function1, function2 } from \"module_name\";",
        "exportPublic": "pub fn public_function() -> Any { }",
        "exportDefault": "pub (default) fn default_function() -> Any { }",
        "reExport": "pub import \"other_module\";"
      },
      "filePaths": {
        "modules": "app/modules/",
        "extension": ".sl"
      },
      "examples": [
        "import \"utils/string_helpers\";",
        "import { format_date, parse_number } from \"helpers/parsers\";",
        "pub fn helper() -> Any { }"
      ]
    },
    "destructuring": {
      "description": "Extract values from hashes and arrays using destructuring syntax",
      "syntax": {
        "hashDestructuring": "let { key1, key2 } = hash_object;",
        "arrayDestructuring": "let [first, second, ...rest] = array;",
        "nestedDestructuring": "let { user: { name, email }, posts } = data;",
        "withRenaming": "let { old_name: new_name } = object;"
      },
      "examples": [
        "let { id, title, author } = post;",
        "let [first, second] = items;",
        "let { items: [first_item], metadata: { count } } = response;"
      ]
    },
    "restOperator": {
      "description": "Collect multiple arguments into an array using rest operator",
      "syntax": {
        "restParams": "fn sum(...numbers: Int[]) -> Int",
        "restInDestructuring": "let [first, ...rest] = array;",
        "restInHash": "fn configure(options: { ... }) -> Any"
      },
      "examples": [
        "fn sum(...numbers: Int[]) -> Int { return numbers.reduce(0, fn(acc, n) { acc + n }); }",
        "fn log(message: String, ...args: Any[]) -> Any { /* args collected */ }"
      ]
    },
    "hashSpread": {
      "description": "Merge hashes using spread operator",
      "syntax": {
        "hashSpread": "let merged = { ...defaults, overrides };",
        "nestedSpread": "let config = { ...base_config, ...user_config, \"new_key\": value };"
      },
      "examples": [
        "let default_options = { timeout: 30, retries: 3 };",
        "let options = { ...default_options, timeout: 60 };",
        "let user = { ...base_user, avatar: new_avatar };"
      ]
    }
  },

  "databases": {
    "solidb": {
      "name": "SoliDB (SolidB)",
      "description": "A lightweight, high-performance multi-document database with SDBQL query language",
      "version": "0.5.0",
      "url": "https://github.com/solisoft/solidb",
      "docs": "https://solidb.solisoft.net/docs/",
      "fileExtension": ".sl",
      "features": [
        "JSON document storage",
        "SDBQL query language (ArangoDB-inspired)",
        "Multi-node replication and sharding",
        "ACID transactions",
        "Lua scripting",
        "WebSocket real-time subscriptions",
        "Blob storage",
        "Vector search and hybrid queries"
      ],
      "api": {
        "baseUrl": "http://localhost:6745",
        "version": "v1",
        "endpoints": {
          "query": "POST /_api/database/{db}/query",
          "explain": "POST /_api/database/{db}/explain",
          "transaction": "POST /_api/database/{db}/transaction",
          "documents": {
            "insert": "POST /_api/database/{db}/document/{collection}",
            "get": "GET /_api/database/{db}/document/{collection}/{id}",
            "update": "PUT /_api/database/{db}/document/{collection}/{id}",
            "delete": "DELETE /_api/database/{db}/document/{collection}/{id}"
          },
          "collections": {
            "list": "GET /_api/database/{db}/collection",
            "create": "POST /_api/database/{db}/collection",
            "delete": "DELETE /_api/database/{db}/collection/{name}"
          },
          "indexes": {
            "create": "POST /_api/database/{db}/index/{collection}",
            "list": "GET /_api/database/{db}/index/{collection}"
          },
          "ai": {
            "agents": "GET/POST /_api/ai/agents",
            "tasks": "GET/POST /_api/ai/tasks",
            "contributions": "GET/POST /_api/ai/contributions",
            "generate": "POST /_api/ai/generate"
          }
        }
      },
      "sdbql": {
        "syntax": "FOR doc IN collection FILTER condition RETURN doc",
        "clauses": ["FOR", "FILTER", "SORT", "LIMIT", "OFFSET", "RETURN", "COLLECT", "LET", "UPSERT", "INSERT", "UPDATE", "REMOVE", "REPLACE"],
        "functions": ["LENGTH", "CONTAINS", "LIKE", "DATE_FORMAT", "DISTANCE", "TO_NUMBER", "TO_STRING", "TO_BOOL", "FIRST", "LAST", "APPEND", "PUSH", "POP", "REMOVE", "UNIQUE", "SORTED", "MIN", "MAX", "SUM", "AVG"]
      },
      "luaScripting": {
        "collection": "db.collection_name",
        "query": "db:query(sdbql_string, params)",
        "documents": {
          "insert": "db.collection:insert(document)",
          "get": "db.collection:get(id)",
          "update": "db.collection:update(id, data)",
          "delete": "db.collection:delete(id)"
        },
        "transactions": "db:transaction(function() ... end)"
      }
    }
  },

  "conventions": {
    "controller": {
      "baseClass": "Controller",
      "fileSuffix": "_controller.sl",
      "classNaming": "PascalCase ending with 'Controller'",
      "methodNaming": "snake_case",
      "methodSignature": "fn method_name(req: Any) -> Any",
      "requiredMethods": ["index", "show", "new", "create", "edit", "update", "destroy"],
      "privateMethods": "prefixed with '_' (e.g., _helper_method)",
      "renderFunction": "render(template_path: string, data: hash) -> Any",
      "responseTypes": ["html", "json", "redirect", "raw"],
      "layout": "static property this.layout = \"layout_name\""
    },

    "middleware": {
      "fileSuffix": ".sl",
      "functionSignature": "fn middleware_name(req: Any) -> Any",
      "returnFormat": {
        "continue": "boolean - whether to continue to next middleware/controller",
        "request": "modified request hash (optional)",
        "response": "early response hash (optional, skips rest of chain)"
      },
      "types": {
        "global": "runs for ALL routes, marked with // global_only: true",
        "scope": "runs only when explicitly scoped with middleware() wrapper",
        "regular": "can be global or scoped"
      },
      "order": "ascending number in // order: N comment",
      "scopeOnly": "marked with // scope_only: true"
    },

    "routes": {
      "pattern": "HTTP_METHOD('/path', 'controller#action')",
      "httpMethods": ["get", "post", "put", "delete", "patch"],
      "controllerAction": "lowercase_controller#lowercase_action",
      "parameters": "captured with :param_name syntax",
      "resources": "resources('name', null) generates RESTful routes",
      "middleware": "middleware('name', -> { scoped routes })",
      "websocket": "router_websocket('/path', 'controller#action')",
      "live": "router_live('/path', 'ControllerLive')"
    },

    "views": {
      "directory": "app/views/{controller_name}/",
      "fileExtension": ".html.erb",
      "partialPrefix": "_",
      "layoutFile": "layouts/application.html.erb",
      "yieldTag": "<%= yield %>",
      "variables": "passed in render() data hash, accessed as @variable_name",
      "helpers": {
        "h()": "HTML escape",
        "html_escape()": "HTML escape",
        "datetime_format()": "format DateTime",
        "render_partial()": "include partial template"
      }
    },

    "models": {
      "baseClass": "Model",
      "fileSuffix": ".sl",
      "classNaming": "PascalCase singular (e.g., User, Post)",
      "collectionNaming": "auto-derived from class name (User â†’ users)",
      "crudMethods": ["create", "find", "all", "update", "destroy"],
      "queryMethods": ["where", "order", "limit", "offset"],
      "callbacks": ["before_save", "after_create", "before_delete", "after_find"],
      "validations": "validates(field_name, { options })"
    },

    "liveview": {
      "description": "Real-time reactive UI components without JavaScript",
      "fileExtension": ".sliv",
      "directory": "app/views/live/",
      "controllerFile": "app/controllers/live_controller.sl",
      "registration": "router_live('component_name', 'ControllerLive')",
      "stateManagement": "State is managed server-side and synced via WebSocket",
      "events": {
        "soli-click": "Handle click events",
        "soli-change": "Handle input change events",
        "soli-submit": "Handle form submission",
        "soli-keyup": "Handle keyboard events"
      },
      "eventHandler": {
        "functionSignature": "fn handler_name(event: Any) -> Any",
        "eventProperties": ["event", "state", "target", "value"],
        "returnFormat": "{ \"state\": { \"key\": value }, \"effects\": [...] }"
      },
      "templateSyntax": {
        "stateVariable": "@variable_name",
        "directives": ["soli-click", "soli-change", "soli-submit", "soli-keyup", "soli-mount", "soli-update"],
        "conditionals": "<% if condition %> ... <% end %>",
        "loops": "<% for item in items %> ... <% end %>"
      }
    }
  },

  "aiPrompts": {
    "generateController": "Generate a {resource}Controller with CRUD actions (index, show, new, create, edit, update, destroy)",
    "generateMiddleware": "Generate authentication middleware that checks for session",
    "generateRoutes": "Add RESTful routes for {resource} resource",
    "generateViews": "Generate index and show views for {resource}",
    "scaffoldResource": "Create full scaffold for {resource} with fields: {fields}",
    "solidbIntegration": "Create a SoliDB/SolidB model for {collection} with SDBQL queries for CRUD operations",
    "solidbQuery": "Write SDBQL query to {operation} from {collection} collection",
    "solidbTransaction": "Implement atomic transaction for {operation} using SoliDB driver",
    "solidbLuaScript": "Create Lua script for {purpose} in SoliDB scripting module",
    "generateLiveView": "Create a LiveView component with state management, event handlers, and reactive template",
    "generateLiveViewEvents": "Implement event handlers for LiveView component with state updates",
    "generateLiveViewRoute": "Register LiveView component with router_live() in routes configuration",
    "generateAsyncController": "Generate an async controller with async/await patterns for {operation}. Include proper error handling with try/catch.",
    "generateErrorHandling": "Implement error handling with try/catch/throw for {function}. Handle specific error types (ValueError, TypeError, KeyError, IndexError).",
    "generateModule": "Create a reusable module {module_name} with pub/export functions for {purpose}. Include proper module structure with import statements.",
    "generateDestructuring": "Refactor code to use destructuring syntax for extracting {data_structure}. Use let {key1, key2} for hashes and let [first, ...rest] for arrays.",
    "generateRestParams": "Create a function with rest parameters for {purpose}. Use fn function_name(...args: Type[]) syntax.",
    "generateHashSpread": "Implement hash spreading for {purpose}. Use { ...defaults, overrides } pattern to merge configurations."
  },

  "filePaths": {
    "conventions": ".soli/conventions/*.json",
    "examples": ".soli/examples/*.sl",
    "routes": "config/routes.sl",
    "controllers": "app/controllers/*.sl",
    "middleware": "app/middleware/*.sl",
    "views": "app/views/*/",
    "models": "app/models/*.sl",
    "modules": "app/modules/*.sl",
    "scripts": "app/scripts/*.lua",
    "solidb": "../solidb/"
  }
}
