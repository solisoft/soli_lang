{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SoliDB (SolidB) Database Integration Conventions",
  "description": "Machine-readable conventions for SoliDB/SolidB database integration in Soli MVC",
  "type": "object",
  "properties": {
    "overview": {
      "type": "object",
      "properties": {
        "name": {"type": "string", "enum": ["SoliDB", "SolidB"]},
        "description": {"type": "string"},
        "version": {"type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$"},
        "language": {"type": "string", "enum": ["Rust"]},
        "license": {"type": "string"}
      }
    },
    "connection": {
      "type": "object",
      "properties": {
        "defaultHost": {"type": "string", "default": "localhost"},
        "defaultPort": {"type": "integer", "default": 6745},
        "protocol": {"type": "string", "enum": ["http", "https"]},
        "authentication": {
          "type": "object",
          "properties": {
            "methods": {
              "type": "array",
              "items": {"type": "string", "enum": ["Bearer token", "API key", "Basic auth"]}
            },
            "headers": {
              "type": "object",
              "properties": {
                "Authorization": {"type": "string", "description": "Bearer token or Basic auth"},
                "X-API-Key": {"type": "string", "description": "API key authentication"}
              }
            }
          }
        }
      }
    },
    "apiEndpoints": {
      "type": "object",
      "description": "Complete list of SoliDB HTTP API endpoints",
      "properties": {
        "databases": {
          "list": {"type": "string", "pattern": "GET /_api/databases", "description": "List all databases"},
          "create": {"type": "string", "pattern": "POST /_api/database", "description": "Create new database"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{name}", "description": "Delete database"}
        },
        "collections": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/collection", "description": "List collections"},
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/collection", "description": "Create collection"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/collection/{name}", "description": "Delete collection"},
          "truncate": {"type": "string", "pattern": "PUT /_api/database/{db}/collection/{name}/truncate", "description": "Truncate collection"},
          "properties": {"type": "string", "pattern": "PUT /_api/database/{db}/collection/{name}/properties", "description": "Update properties"},
          "stats": {"type": "string", "pattern": "GET /_api/database/{db}/collection/{name}/stats", "description": "Get collection stats"},
          "count": {"type": "string", "pattern": "GET /_api/database/{db}/collection/{name}/count", "description": "Get document count"},
          "compact": {"type": "string", "pattern": "PUT /_api/database/{db}/collection/{name}/compact", "description": "Compact collection"},
          "prune": {"type": "string", "pattern": "POST /_api/database/{db}/collection/{name}/prune", "description": "Prune documents"},
          "recount": {"type": "string", "pattern": "PUT /_api/database/{db}/collection/{name}/recount", "description": "Recount documents"},
          "repair": {"type": "string", "pattern": "POST /_api/database/{db}/collection/{name}/repair", "description": "Repair collection"},
          "export": {"type": "string", "pattern": "GET /_api/database/{db}/collection/{name}/export", "description": "Export collection"},
          "import": {"type": "string", "pattern": "POST /_api/database/{db}/collection/{name}/import", "description": "Import documents"},
          "schema": {
            "set": {"type": "string", "pattern": "POST /_api/database/{db}/collection/{name}/schema", "description": "Set collection schema"},
            "get": {"type": "string", "pattern": "GET /_api/database/{db}/collection/{name}/schema", "description": "Get collection schema"},
            "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/collection/{name}/schema", "description": "Delete schema"}
          }
        },
        "documents": {
          "insert": {"type": "string", "pattern": "POST /_api/database/{db}/document/{collection}", "description": "Insert single document"},
          "insertBatch": {"type": "string", "pattern": "POST /_api/database/{db}/document/{collection}/_batch", "description": "Batch insert documents"},
          "insertReplica": {"type": "string", "pattern": "POST /_api/database/{db}/document/{collection}/_replica", "description": "Insert replica document"},
          "verify": {"type": "string", "pattern": "POST /_api/database/{db}/document/{collection}/_verify", "description": "Verify documents exist"},
          "get": {"type": "string", "pattern": "GET /_api/database/{db}/document/{collection}/{id}", "description": "Get document by ID"},
          "update": {"type": "string", "pattern": "PUT /_api/database/{db}/document/{collection}/{id}", "description": "Update document"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/document/{collection}/{id}", "description": "Delete document"}
        },
        "blobs": {
          "upload": {"type": "string", "pattern": "POST /_api/blob/{db}/{collection}", "description": "Upload binary blob"},
          "download": {"type": "string", "pattern": "GET /_api/blob/{db}/{collection}/{key}", "description": "Download blob"}
        },
        "query": {
          "execute": {"type": "string", "pattern": "POST /_api/database/{db}/query", "description": "Execute SDBQL query"},
          "explain": {"type": "string", "pattern": "POST /_api/database/{db}/explain", "description": "Explain query plan"},
          "cursor": {
            "create": {"type": "string", "pattern": "POST /_api/database/{db}/cursor", "description": "Create cursor"},
            "next": {"type": "string", "pattern": "PUT /_api/database/{db}/cursor/{id}", "description": "Get next batch"},
            "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/cursor/{id}", "description": "Delete cursor"}
          },
          "nl": {
            "query": {"type": "string", "pattern": "POST /_api/database/{db}/nl", "description": "Natural language query"},
            "feedback": {"type": "string", "pattern": "POST /_api/database/{db}/nl/feedback", "description": "Submit query feedback"}
          }
        },
        "indexes": {
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/index/{collection}", "description": "Create index"},
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/index/{collection}", "description": "List indexes"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/index/{collection}/{name}", "description": "Delete index"},
          "rebuild": {"type": "string", "pattern": "PUT /_api/database/{db}/index/{collection}/rebuild", "description": "Rebuild index"}
        },
        "geo": {
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/geo/{collection}", "description": "Create geo index"},
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/geo/{collection}", "description": "List geo indexes"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/geo/{collection}/{name}", "description": "Delete geo index"},
          "near": {"type": "string", "pattern": "POST /_api/database/{db}/geo/{collection}/{field}/near", "description": "Geo near query"},
          "within": {"type": "string", "pattern": "POST /_api/database/{db}/geo/{collection}/{field}/within", "description": "Geo within query"}
        },
        "vector": {
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/vector/{collection}", "description": "Create vector index"},
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/vector/{collection}", "description": "List vector indexes"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/vector/{collection}/{name}", "description": "Delete vector index"},
          "search": {"type": "string", "pattern": "POST /_api/database/{db}/vector/{collection}/{index}/search", "description": "Vector similarity search"},
          "quantize": {"type": "string", "pattern": "POST /_api/database/{db}/vector/{collection}/{index}/quantize", "description": "Quantize vectors"},
          "dequantize": {"type": "string", "pattern": "POST /_api/database/{db}/vector/{collection}/{index}/dequantize", "description": "Dequantize vectors"}
        },
        "hybridSearch": {"type": "string", "pattern": "POST /_api/database/{db}/hybrid/{collection}/search", "description": "Hybrid search (vector + fulltext)"},
        "ttl": {
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/ttl/{collection}", "description": "Create TTL index"},
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/ttl/{collection}", "description": "List TTL indexes"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/ttl/{collection}/{name}", "description": "Delete TTL index"}
        },
        "columnar": {
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/columnar", "description": "Create columnar collection"},
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/columnar", "description": "List columnar collections"},
          "get": {"type": "string", "pattern": "GET /_api/database/{db}/columnar/{collection}", "description": "Get columnar collection"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/columnar/{collection}", "description": "Delete columnar collection"},
          "insert": {"type": "string", "pattern": "POST /_api/database/{db}/columnar/{collection}/insert", "description": "Insert into columnar"},
          "aggregate": {"type": "string", "pattern": "POST /_api/database/{db}/columnar/{collection}/aggregate", "description": "Aggregate columnar data"},
          "query": {"type": "string", "pattern": "POST /_api/database/{db}/columnar/{collection}/query", "description": "Query columnar collection"},
          "indexCreate": {"type": "string", "pattern": "POST /_api/database/{db}/columnar/{collection}/index", "description": "Create columnar index"},
          "indexList": {"type": "string", "pattern": "GET /_api/database/{db}/columnar/{collection}/indexes", "description": "List columnar indexes"},
          "indexDelete": {"type": "string", "pattern": "DELETE /_api/database/{db}/columnar/{collection}/index/{column}", "description": "Delete columnar index"}
        },
        "transaction": {
          "begin": {"type": "string", "pattern": "POST /_api/database/{db}/transaction/begin", "description": "Begin transaction"},
          "commit": {"type": "string", "pattern": "POST /_api/database/{db}/transaction/{id}/commit", "description": "Commit transaction"},
          "rollback": {"type": "string", "pattern": "POST /_api/database/{db}/transaction/{id}/rollback", "description": "Rollback transaction"},
          "insertDoc": {"type": "string", "pattern": "POST /_api/database/{db}/transaction/{id}/document/{collection}", "description": "Insert document in transaction"},
          "updateDoc": {"type": "string", "pattern": "PUT /_api/database/{db}/transaction/{id}/document/{collection}/{key}", "description": "Update document in transaction"},
          "deleteDoc": {"type": "string", "pattern": "DELETE /_api/database/{db}/transaction/{id}/document/{collection}/{key}", "description": "Delete document in transaction"},
          "executeQuery": {"type": "string", "pattern": "POST /_api/database/{db}/transaction/{id}/query", "description": "Execute query in transaction"}
        },
        "cluster": {
          "status": {"type": "string", "pattern": "GET /_api/cluster/status", "description": "Get cluster status"},
          "info": {"type": "string", "pattern": "GET /_api/cluster/info", "description": "Get cluster info"},
          "removeNode": {"type": "string", "pattern": "POST /_api/cluster/remove-node", "description": "Remove node from cluster"},
          "rebalance": {"type": "string", "pattern": "POST /_api/cluster/rebalance", "description": "Rebalance cluster"}
        },
        "auth": {
          "changePassword": {"type": "string", "pattern": "PUT /_api/auth/password", "description": "Change password"},
          "apiKeys": {
            "create": {"type": "string", "pattern": "POST /_api/auth/api-keys", "description": "Create API key"},
            "list": {"type": "string", "pattern": "GET /_api/auth/api-keys", "description": "List API keys"},
            "delete": {"type": "string", "pattern": "DELETE /_api/auth/api-keys/{key_id}", "description": "Delete API key"}
          },
          "roles": {
            "list": {"type": "string", "pattern": "GET /_api/auth/roles", "description": "List roles"},
            "create": {"type": "string", "pattern": "POST /_api/auth/roles", "description": "Create role"},
            "get": {"type": "string", "pattern": "GET /_api/auth/roles/{name}", "description": "Get role"},
            "update": {"type": "string", "pattern": "PUT /_api/auth/roles/{name}", "description": "Update role"},
            "delete": {"type": "string", "pattern": "DELETE /_api/auth/roles/{name}", "description": "Delete role"}
          },
          "users": {
            "list": {"type": "string", "pattern": "GET /_api/auth/users", "description": "List users"},
            "create": {"type": "string", "pattern": "POST /_api/auth/users", "description": "Create user"},
            "delete": {"type": "string", "pattern": "DELETE /_api/auth/users/{username}", "description": "Delete user"},
            "getRoles": {"type": "string", "pattern": "GET /_api/auth/users/{username}/roles", "description": "Get user roles"},
            "assignRole": {"type": "string", "pattern": "POST /_api/auth/users/{username}/roles", "description": "Assign role to user"},
            "revokeRole": {"type": "string", "pattern": "DELETE /_api/auth/users/{username}/roles/{role}", "description": "Revoke role from user"}
          },
          "me": {
            "get": {"type": "string", "pattern": "GET /_api/auth/me", "description": "Get current user"},
            "permissions": {"type": "string", "pattern": "GET /_api/auth/me/permissions", "description": "Get current user permissions"}
          }
        },
        "queues": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/queues", "description": "List queues"},
          "listJobs": {"type": "string", "pattern": "GET /_api/database/{db}/queues/{name}/jobs", "description": "List queue jobs"},
          "enqueue": {"type": "string", "pattern": "POST /_api/database/{db}/queues/{name}/enqueue", "description": "Enqueue job"},
          "cancelJob": {"type": "string", "pattern": "DELETE /_api/database/{db}/queues/jobs/{id}", "description": "Cancel job"}
        },
        "cron": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/cron", "description": "List cron jobs"},
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/cron", "description": "Create cron job"},
          "update": {"type": "string", "pattern": "PUT /_api/database/{db}/cron/{id}", "description": "Update cron job"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/cron/{id}", "description": "Delete cron job"}
        },
        "triggers": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/triggers", "description": "List triggers"},
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/triggers", "description": "Create trigger"},
          "update": {"type": "string", "pattern": "PUT /_api/database/{db}/triggers/{id}", "description": "Update trigger"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/triggers/{id}", "description": "Delete trigger"}
        },
        "scripts": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/scripts", "description": "List scripts"},
          "create": {"type": "string", "pattern": "POST /_api/database/{db}/scripts", "description": "Create script"},
          "update": {"type": "string", "pattern": "PUT /_api/database/{db}/scripts/{id}", "description": "Update script"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/scripts/{id}", "description": "Delete script"},
          "execute": {"type": "string", "pattern": "POST /_api/database/{db}/scripts/{id}/execute", "description": "Execute script"}
        },
        "env": {
          "list": {"type": "string", "pattern": "GET /_api/database/{db}/env", "description": "List environment variables"},
          "set": {"type": "string", "pattern": "PUT /_api/database/{db}/env/{key}", "description": "Set environment variable"},
          "delete": {"type": "string", "pattern": "DELETE /_api/database/{db}/env/{key}", "description": "Delete environment variable"}
        },
        "ai": {
          "agents": {"type": "string", "pattern": "GET/POST /_api/ai/agents", "description": "List/Register AI agents"},
          "agentGet": {"type": "string", "pattern": "GET /_api/ai/agents/{id}", "description": "Get agent by ID"},
          "agentUpdate": {"type": "string", "pattern": "PUT /_api/ai/agents/{id}", "description": "Update agent"},
          "agentDelete": {"type": "string", "pattern": "DELETE /_api/ai/agents/{id}", "description": "Delete agent"},
          "agentHeartbeat": {"type": "string", "pattern": "POST /_api/ai/agents/{id}/heartbeat", "description": "Agent heartbeat"},
          "tasks": {"type": "string", "pattern": "GET/POST /_api/ai/tasks", "description": "List/Claim AI tasks"},
          "taskGet": {"type": "string", "pattern": "GET /_api/ai/tasks/{id}", "description": "Get task by ID"},
          "taskComplete": {"type": "string", "pattern": "POST /_api/ai/tasks/{id}/complete", "description": "Complete task"},
          "taskFail": {"type": "string", "pattern": "POST /_api/ai/tasks/{id}/fail", "description": "Fail task"},
          "contributions": {"type": "string", "pattern": "GET/POST /_api/ai/contributions", "description": "List/Submit contributions"},
          "contributionGet": {"type": "string", "pattern": "GET /_api/ai/contributions/{id}", "description": "Get contribution"},
          "contributionApprove": {"type": "string", "pattern": "POST /_api/ai/contributions/{id}/approve", "description": "Approve contribution"},
          "contributionReject": {"type": "string", "pattern": "POST /_api/ai/contributions/{id}/reject", "description": "Reject contribution"},
          "contributionCancel": {"type": "string", "pattern": "POST /_api/ai/contributions/{id}/cancel", "description": "Cancel contribution"},
          "generate": {"type": "string", "pattern": "POST /_api/ai/generate", "description": "Generate content with LLM"},
          "feedback": {
            "list": {"type": "string", "pattern": "GET /_api/ai/feedback", "description": "List feedback"},
            "get": {"type": "string", "pattern": "GET /_api/ai/feedback/{id}", "description": "Get feedback"},
            "process": {"type": "string", "pattern": "POST /_api/ai/feedback", "description": "Process feedback"},
            "recommendations": {"type": "string", "pattern": "GET /_api/ai/recommendations", "description": "Get recommendations"},
            "patterns": {"type": "string", "pattern": "GET /_api/ai/patterns", "description": "List patterns"}
          },
          "marketplace": {
            "discover": {"type": "string", "pattern": "GET /_api/ai/marketplace", "description": "Discover agents"},
            "rankings": {"type": "string", "pattern": "GET /_api/ai/marketplace/rankings", "description": "Get agent rankings"},
            "reputation": {"type": "string", "pattern": "GET /_api/ai/marketplace/{id}/reputation", "description": "Get agent reputation"},
            "select": {"type": "string", "pattern": "POST /_api/ai/marketplace/select", "description": "Select agent"},
            "verify": {"type": "string", "pattern": "POST /_api/ai/marketplace/verify", "description": "Verify capability"}
          },
          "recovery": {
            "status": {"type": "string", "pattern": "GET /_api/ai/recovery/status", "description": "Get recovery status"},
            "events": {"type": "string", "pattern": "GET /_api/ai/recovery/events", "description": "List recovery events"},
            "retry": {"type": "string", "pattern": "POST /_api/ai/recovery/retry", "description": "Retry failed task"},
            "resetCircuit": {"type": "string", "pattern": "POST /_api/ai/recovery/reset-circuit", "description": "Reset circuit breaker"}
          },
          "learning": {"type": "string", "pattern": "POST /_api/ai/learning", "description": "Process learning data"},
          "validation": {
            "run": {"type": "string", "pattern": "POST /_api/ai/validation", "description": "Run validation"},
            "quick": {"type": "string", "pattern": "POST /_api/ai/validation/quick", "description": "Quick validation"}
          }
        },
        "sharding": {
          "status": {"type": "string", "pattern": "GET /_api/sharding/status", "description": "Get sharding status"},
          "migrate": {"type": "string", "pattern": "POST /_api/sharding/migrate", "description": "Migrate shards"},
          "rebalance": {"type": "string", "pattern": "POST /_api/sharding/rebalance", "description": "Rebalance shards"}
        },
        "system": {
          "stats": {"type": "string", "pattern": "GET /_api/system/stats", "description": "Get system stats"},
          "health": {"type": "string", "pattern": "GET /_api/system/health", "description": "Get health status"},
          "version": {"type": "string", "pattern": "GET /_api/system/version", "description": "Get version info"}
        }
      }
    },
    "sdbql": {
      "type": "object",
      "description": "SoliDB Query Language - ArangoDB-inspired syntax",
      "properties": {
        "clauses": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "examples": {"type": "array", "items": {"type": "string"}}
            }
          }
        },
        "operators": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "symbol": {"type": "string"},
              "name": {"type": "string"},
              "description": {"type": "string"}
            }
          }
        },
        "stringFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "aliases": {"type": "array", "items": {"type": "string"}},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "numericFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "aliases": {"type": "array", "items": {"type": "string"}},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "arrayFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "aliases": {"type": "array", "items": {"type": "string"}},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "datetimeFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "typeFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "aliases": {"type": "array", "items": {"type": "string"}},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "aggregateFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "aliases": {"type": "array", "items": {"type": "string"}},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "geoFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "vectorFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "phoneticFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "jsonFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "cryptoFunctions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "syntax": {"type": "string"},
              "description": {"type": "string"},
              "example": {"type": "string"}
            }
          }
        },
        "indexTypes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {"type": "string", "enum": ["hash", "persistent", "geo", "fulltext", "vector", "ttl", "columnar"]},
              "syntax": {"type": "string"},
              "description": {"type": "string"}
            }
          }
        }
      }
    },
    "luaScripting": {
      "type": "object",
      "description": "Lua scripting integration in SoliDB",
      "properties": {
        "entryPoint": {"type": "string", "pattern": "function handle(request) ... end"},
        "requestObject": {
          "type": "object",
          "properties": {
            "method": {"type": "string"},
            "path": {"type": "string"},
            "headers": {"type": "object"},
            "body": {"type": "object"},
            "query": {"type": "object"}
          }
        },
        "responseFormat": {
          "type": "object",
          "properties": {
            "status": {"type": "integer"},
            "headers": {"type": "object"},
            "body": {"type": "string"}
          }
        },
        "dbObject": {
          "type": "object",
          "properties": {
            "query": {"type": "string", "description": "db:query(sdbql_string, params)"},
            "collection": {"type": "string", "description": "db.collection_name"},
            "transaction": {"type": "string", "description": "db:transaction(function() ... end)"},
            "http": {"type": "object", "description": "http.request(url, options)"}
          }
        },
        "documentMethods": {
          "type": "object",
          "properties": {
            "insert": {"type": "string", "description": "db.collection:insert(document)"},
            "get": {"type": "string", "description": "db.collection:get(id)"},
            "update": {"type": "string", "description": "db.collection:update(id, data)"},
            "delete": {"type": "string", "description": "db.collection:delete(id)"},
            "exists": {"type": "string", "description": "db.collection:exists(id)"},
            "count": {"type": "string", "description": "db.collection:count()"},
            "query": {"type": "string", "description": "db.collection:query(sdbql, params)"}
          }
        }
      }
    },
    "aiAgents": {
      "type": "object",
      "description": "AI agent integration in SoliDB",
      "properties": {
        "endpoints": {"type": "array"},
        "agentLifecycle": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "operation": {"type": "string"},
              "description": {"type": "string"}
            }
          }
        },
        "taskManagement": {
          "type": "object",
          "properties": {
            "claim": {"type": "string", "description": "Claim a task for execution"},
            "complete": {"type": "string", "description": "Mark task as completed"},
            "fail": {"type": "string", "description": "Mark task as failed"}
          }
        }
      }
    },
    "controllerPatterns": {
      "type": "object",
      "description": "Patterns for integrating SoliDB in Soli MVC controllers",
      "properties": {
        "databaseConnection": {
          "type": "string",
          "pattern": "let db = solidb_connect(host, port, api_key);",
          "description": "Connect to SoliDB from controller"
        },
        "queryExecution": {
          "type": "string",
          "pattern": "let result = solidb_query(db, database, query_string, params);",
          "description": "Execute SDBQL query"
        },
        "documentOperations": {
          "type": "object",
          "properties": {
            "insert": {"type": "string", "pattern": "solidb_insert(db, database, collection, document)"},
            "get": {"type": "string", "pattern": "solidb_get(db, database, collection, id)"},
            "update": {"type": "string", "pattern": "solidb_update(db, database, collection, id, data)"},
            "delete": {"type": "string", "pattern": "solidb_delete(db, database, collection, id)"},
            "find": {"type": "string", "pattern": "solidb_find(db, database, collection, query)"}
          }
        },
        "transaction": {
          "type": "string",
          "pattern": "let result = solidb_transaction(db, database, fn(tx) { ... });",
          "description": "Execute atomic transaction"
        }
      }
    },
    "examples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "description": {"type": "string"},
          "sdbql": {"type": "string"},
          "lua": {"type": "string"},
          "soli": {"type": "string"}
        }
      }
    }
  }
}
